# Discussion
## Windows API's Calling Convention
`__stdcall`
- puts arguments on the stack
- ie. `int WINAPI find_node(...) {...}`

`__fastcall`
- first 4 arguments go to registers
- only works in 32-bit Windows

`#define WINAPI
- allows for changing the used calling convention for select libraries/projects (ie. between the two above)
- some standard library code have `#define WINAPI __stdcall` to avoid calling convention changes

## DLL
`DllMain()`: allows DLLs to run code for initialization
```C++
BOOL WINAPI DllMain(
    HINSTANCE hinstDLL,  // handle to DLL module
    DWORD fdwReason,     // reason for calling function
    LPVOID lpvReserved )  // reserved
{
    // Perform actions based on the reason for calling.
    switch( fdwReason ) 
    { 
        case DLL_PROCESS_ATTACH:
         // Initialize once for each new process.
         // Return FALSE to fail DLL load.
            break;

        case DLL_THREAD_ATTACH:
         // Do thread-specific initialization.
            break;

        case DLL_THREAD_DETACH:
         // Do thread-specific cleanup.
            break;

        case DLL_PROCESS_DETACH:
        
            if (lpvReserved != nullptr)
            {
                break; // do not do cleanup if process termination scenario
            }
            
         // Perform any necessary cleanup.
            break;
    }
    return TRUE;  // Successful DLL_PROCESS_ATTACH.
}
```
**Threads**
- Thread Local Storage (TLS): global variables that multiple threads appear to access safely
	- https://stackoverflow.com/questions/11983875/what-does-the-thread-local-mean-in-c11
	- copies of variable stored on each thread
	- TLS vars synchronized on context switch
- Local variables of each thread stay on their stack segmento

# Course Lecture
## Autorun
Applications can be automatically started via...
- registry (HKLM)
- services
- task scheduler

## Component Object Model (COM)
